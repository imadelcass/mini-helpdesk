<div class="container mx-auto p-4">
  <h1 class="text-3xl font-bold m-0">FAQ</h1>
  <div class="flex justify-between items-center my-4">
    <p-button
      type="button"
      label="Add FAQ"
      icon="pi pi-plus"
      class="p-button-success"
      (click)="openCreateDialog()"
    ></p-button>
    <input pInputText type="text" placeholder="Search..." class="mr-2" [(ngModel)]="searchQuery" />
  </div>

  <p-divider></p-divider>

  <div class="card">
    <p-table
      stripedRows
      [columns]="cols"
      [value]="allFaqs"
      [scrollable]="true"
      scrollHeight="500px"
      [rows]="10"
      [virtualScroll]="true"
      [virtualScrollItemSize]="80"
      [lazy]="true"
      [loading]="faqService.loading()"
      (onLazyLoad)="onLazyLoad($event)"
    >
      <ng-template #header let-columns>
        <tr>
          <th>Question</th>
          <th>Answer</th>
          <th class="min-w-48">Category</th>
          <th class="min-w-32">Created At</th>
          <th>Actions</th>
        </tr>
      </ng-template>
      <!-- Body remains exactly the same -->
      <ng-template let-faq let-columns="columns" pTemplate="body">
        <tr class="h-[80px]">
          <!-- Question Column -->
          <td>
            <div class="font-medium text-900 line-clamp-1 overflow-hidden text-ellipsis">
              {{ faq.question }}
            </div>
          </td>

          <!-- Answer Column -->
          <td>
            <div class="text-600 line-clamp-1 overflow-hidden text-ellipsis">
              {{ faq.answer }}
            </div>
          </td>

          <!-- Category Column -->
          <td class="min-w-48">
            <p-tag [value]="faq.category?.name"></p-tag>
          </td>

          <!-- Created At Column -->
          <td class="min-w-32">
            <div class="text-600 line-clamp-1">
              {{ faq.created_at | date : 'shortDate' }}
            </div>
          </td>

          <!-- Actions Column (Admin only) -->
          <td>
            <div class="flex gap-1">
              <button
                pButton
                pRipple
                icon="pi pi-pencil"
                class="p-button-primary p-button-text p-button-sm"
                pTooltip="Edit FAQ"
                tooltipPosition="top"
                (click)="onEdit(faq)"
              ></button>

              <div>
                <button
                  pButton
                  pRipple
                  icon="pi pi-trash"
                  class="p-button-danger p-button-text p-button-sm"
                  pTooltip="Delete FAQ"
                  tooltipPosition="top"
                  (click)="onDelete(faq.id)"
                ></button>
              </div>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <app-faq-form [(visible)]="showFaqForm" [faq]="selectedFaq" (saved)="onFaqSaved($event)">
  </app-faq-form>
</div>
