<p-dialog header="Edit Profile" [modal]="true" [(visible)]="visible" [style]="{ width: '50rem' }">
  <!-- Form -->
  <form [formGroup]="ticketForm" class="grid grid-cols-2 gap-4 my-4">
    <!-- title Field -->
    <div class="col-span-1">
      <label for="title" class="block font-medium mb-2">title *</label>
      <input
        pInputText
        id="title"
        formControlName="title"
        placeholder="Enter the title"
        class="w-full"
        [class]="isFieldInvalid('title') ? 'ng-invalid ng-dirty' : ''"
      />

      @if (isFieldInvalid('title')) {
      <small class="p-error block mt-1 text-red-500">
        <i class="pi pi-exclamation-circle"></i>
        {{ getFieldError('title') }}
      </small>
      }
    </div>

    <!-- Category Field -->
    <div class="col-span-1">
      <label for="ticket_category_id" class="block font-medium mb-2">Category *</label>
      <p-select
        id="ticket_category_id"
        formControlName="ticket_category_id"
        [options]="ticketService.categories()"
        optionLabel="name"
        optionValue="id"
        class="w-full"
        placeholder="Select a category"
        [showClear]="true"
        [filter]="true"
        filterBy="name"
      >
      </p-select>
    </div>

    <!-- Status Field -->
    <div class="col-span-1">
      <label for="status" class="block font-medium mb-2">Status *</label>
      <p-select
        id="status"
        formControlName="status"
        [options]="ticketService.getStatuses()"
        optionLabel="label"
        optionValue="value"
        class="w-full"
        placeholder="Select a status"
        [showClear]="true"
        [filter]="true"
        filterBy="name"
      >
      </p-select>
    </div>

    <!-- priority Field -->
    <div class="col-span-1">
      <label for="priority" class="block font-medium mb-2">priority *</label>
      <p-select
        id="priority"
        formControlName="priority"
        [options]="ticketService.getPriorities()"
        optionLabel="label"
        optionValue="value"
        class="w-full"
        placeholder="Select a priority"
        [showClear]="true"
        [filter]="true"
        filterBy="name"
      >
      </p-select>
    </div>

    <!-- description Field -->
    <div class="col-span-2">
      <label for="description" class="block font-medium mb-2">description *</label>
      <textarea
        pInputTextarea
        id="description"
        formControlName="description"
        [rows]="5"
        placeholder="Enter the detailed description..."
        class="w-full"
        [class]="isFieldInvalid('description') ? 'ng-invalid ng-dirty' : ''"
      >
      </textarea>

      @if(isFieldInvalid('description')) {
      <small class="p-error block mt-1 text-red-500">
        <i class="pi pi-exclamation-circle"></i>
        {{ getFieldError('description') }}
      </small>
      }
    </div>
  </form>
  <!-- Buttons -->
  <div class="flex justify-end gap-2">
    <p-button label="Cancel" severity="secondary" (click)="onCancel()" />
    <p-button label="Save" (click)="onSave()" />
  </div>
</p-dialog>
